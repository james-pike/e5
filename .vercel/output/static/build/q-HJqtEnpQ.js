import{h as y,k as b,y as j,c as k}from"./q-6LYnCcEd.js";import{_hW as _}from"./q-6LYnCcEd.js";import{F as x,G as q,H as E}from"./q-DQ6srlwn.js";import"./q-fFn9hMSC.js";const F=async function(...o){const[u,d,i,h,a]=y(),s=o.length>0&&o[0]instanceof AbortSignal?o.shift():void 0;{const r=b(),w=o.map(t=>t instanceof SubmitEvent&&t.target instanceof HTMLFormElement?new FormData(t.target):t instanceof Event||t instanceof Node?null:t),c=a.getHash();let l="";const f={...u,method:i,headers:{...d,"Content-Type":"application/qwik-json",Accept:"application/json, application/qwik-json, text/qwik-json-stream, text/plain","X-QRL":c},signal:s},m=await j([a,...w]);i==="GET"?l+=`&${E}=${encodeURIComponent(m)}`:f.body=m;const e=await fetch(`${h}?${x}=${c}${l}`,f),n=e.headers.get("Content-Type");if(e.ok&&n==="text/qwik-json-stream"&&e.body)return(async function*(){try{for await(const t of q(e.body,r??document.documentElement,s))yield t}finally{s?.aborted||await e.body.cancel()}})();if(n==="application/qwik-json"){const t=await e.text(),p=await k(t,r??document.documentElement);if(e.status>=400)throw p;return p}else if(n==="application/json"){const t=await e.json();if(e.status>=400)throw t;return t}else if(n==="text/plain"||n==="text/html"){const t=await e.text();if(e.status>=400)throw t;return t}}};export{_ as _hW,F as s_q0kOBkTkPso};
