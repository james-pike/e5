import{_ as d}from"./q-fFn9hMSC.js";import{S as O}from"./q-DRh9ARp4.js";import{_ as $,g as D,v as g,I as E,e as u,E as o,N as c,f as L,r as k,h as v,_hW as p}from"./q-6LYnCcEd.js";import{u as A}from"./q-zaXe3r0-.js";import{u as P,a as R}from"./q-Dbg0fBS-.js";const J=i=>{const e=$(O),r=P(),a=`${e.localId}-label`,l=`${e.localId}-description`,n=`${e.localId}-error-message`,s=`${e.localId}-trigger`,h=`${e.localId}-panel`,b=`${e.localId}-value`,S=D(!0),_=R(),f={context:e,givenContextRef:e.triggerRef},x=A(i.ref,f),I=g(t=>{t.preventDefault()},"e=>{e.preventDefault();}"),m=c(()=>d(()=>Promise.resolve().then(()=>C),void 0),"s_2LQ4niX972E",[e]),w=g(t=>{["ArrowUp","ArrowDown","ArrowRight","ArrowLeft","Home","End","PageDown","PageUp","Enter"," "].includes(t.key)&&t.preventDefault()},'e=>{const keys=["ArrowUp","ArrowDown","ArrowRight","ArrowLeft","Home","End","PageDown","PageUp","Enter"," "];if(keys.includes(e.key)){e.preventDefault();}}'),y=c(()=>d(()=>Promise.resolve().then(()=>T),void 0),"s_aJjOpUbzNhU",[e,S,r,_]);return E("button",{...i,id:s,ref:x,get"data-open"(){return e.isListboxOpenSig.value?"":void 0},get"data-closed"(){return e.isListboxOpenSig.value?void 0:""},get"data-disabled"(){return e.isDisabledSig.value?"":void 0},get"data-invalid"(){return e.isInvalidSig?.value?"":void 0},"aria-labelledby":`${b} ${a} `,"aria-describedby":`${l} 
      ${n}`,get"aria-expanded"(){return!!e.isListboxOpenSig.value},"aria-haspopup":"listbox","aria-controls":h,get disabled(){return e.isDisabledSig.value?!0:void 0},"preventdefault:blur":!0,children:L(k,null,3,"Os_0"),onClick$:[I,m,i.onClick$],onKeyDown$:[w,y,i.onKeyDown$]},{"data-open":o(t=>t.isListboxOpenSig.value?"":void 0,[e]),"data-closed":o(t=>t.isListboxOpenSig.value?void 0:"",[e]),"data-disabled":o(t=>t.isDisabledSig.value?"":void 0,[e]),"data-invalid":o(t=>t.isInvalidSig?.value?"":void 0,[e]),"aria-expanded":o(t=>!!t.isListboxOpenSig.value,[e]),"aria-haspopup":u,disabled:o(t=>t.isDisabledSig.value?!0:void 0,[e]),"preventdefault:blur":u},0,"Os_1")},U=async i=>{const[e,r,a,l]=v();if(e.itemsMapSig.value){switch(e.isKeyboardFocusSig.value=!0,e.isListboxOpenSig.value||l.typeahead$(i.key),i.key){case"Tab":case"Escape":e.isListboxOpenSig.value=!1;break;case"ArrowDown":case"ArrowUp":e.isListboxOpenSig.value||(e.isListboxOpenSig.value=!0);break;case"ArrowRight":if(!e.multiple){const n=e.highlightedIndexSig.value??-1,s=await a.getNextEnabledItemIndex$(n);await a.selectionManager$(s,"add"),e.highlightedIndexSig.value=s}break;case"ArrowLeft":if(!e.multiple){const n=e.highlightedIndexSig.value??e.itemsMapSig.value.size,s=await a.getPrevEnabledItemIndex$(n);await a.selectionManager$(s,"add"),e.highlightedIndexSig.value=s}break;case"Enter":case" ":e.isListboxOpenSig.value=e.multiple?!0:!e.isListboxOpenSig.value;break}for(e.highlightedIndexSig.value===null&&(i.key==="ArrowUp"?e.highlightedIndexSig.value=await a.getPrevEnabledItemIndex$(e.itemsMapSig.value.size):e.highlightedIndexSig.value=await a.getNextEnabledItemIndex$(-1));e.highlightedItemRef.value!==document.activeElement;)await new Promise(n=>setTimeout(n,5)),e.highlightedItemRef.value?.focus();r.value&&document.dispatchEvent(new CustomEvent("typeaheadFn",{detail:l.typeahead$}))}},T=Object.freeze(Object.defineProperty({__proto__:null,_hW:p,s_aJjOpUbzNhU:U},Symbol.toStringTag,{value:"Module"})),j=()=>{const[i]=v();i.isListboxOpenSig.value=!i.isListboxOpenSig.value},C=Object.freeze(Object.defineProperty({__proto__:null,_hW:p,s_2LQ4niX972E:j},Symbol.toStringTag,{value:"Module"}));export{p as _hW,j as s_2LQ4niX972E,J as s_P7wpSIGS7hA,U as s_aJjOpUbzNhU};
